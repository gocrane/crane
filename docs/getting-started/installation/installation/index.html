<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.102.3"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Installation | Crane</title><meta name=description content="How to install Crane"><meta property="og:title" content="Installation"><meta property="og:description" content="How to install Crane"><meta property="og:type" content="article"><meta property="og:url" content="/docs/getting-started/installation/installation/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-03-15T04:27:07-05:00"><meta property="og:site_name" content="Crane"><meta itemprop=name content="Installation"><meta itemprop=description content="How to install Crane"><meta itemprop=dateModified content="2024-03-15T04:27:07-05:00"><meta itemprop=wordCount content="1180"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Installation"><meta name=twitter:description content="How to install Crane"><link rel=preload href=/scss/main.min.730362c672539a20af5e07f8cb554bed1d08f06cf874786f2cba9f08a6a884cb.css as=style><link href=/scss/main.min.730362c672539a20af5e07f8cb554bed1d08f06cf874786f2cba9f08a6a884cb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="306" height="186" viewBox="144.139 425.446 306 186" enable-background="new 144.139 425.446 306 186"><path fill="#58bda6" d="M267.919 572.702c-.372 5.728-4.972 10.091-10.27 9.743l-40.779-2.65c-5.3-.347-9.293-5.269-8.923-10.991l2.974-45.702c.373-5.728 4.973-10.088 10.271-9.743l40.78 2.652c5.299.345 9.293 5.267 8.921 10.99L267.919 572.702z"/><path fill="#ee7300" d="M355.802 528.969c-28.058-24.713-63.021-62.657-91.196-87.232-1.938-1.69-5.604-3.409-7.457-2.647-1.938.795-3.404 4.46-3.778 7.058-1.761 12.192-2.91 28.237-4.656 40.433-.437 3.041-1.971 6.067-3.571 8.762-2.041 3.435-.873 12.792 2.958 15.723 3.085 2.357 4.303 5.096 1.854 7.834-1.351 1.512-4.525 1.391-6.992 2.032 2.374 2.482 5.765 2.633 9.24-.084 3.808-2.979 2.631-7.084-4.054-14.46 4.628-3.659 5.886-7.839 2.424-13.33-1.104-1.75-.191-4.886.068-7.356 1.027-9.761 2.094-23.278 3.315-33.019.292-2.324 1.237-4.564 2.349-8.479 26.078 34.224 56.794 78.868 82.623 112.767.93-6.764-.387-17.9-.708-23.131-.193-3.154-5.785-8.536-7.861-11.352-3.039-4.109-6.746-7.742-9.644-11.94-.76-1.101-.824-2.206.128-3.594 1.252-1.816 2.925.178 3.865 1.018 9.287 8.277 25.465 24.596 31.02 35.665.248.495-1.506-11.808-.865-10.746"/><path d="M185.44 554.611v-4.04c0-2.692-.57-4.727-1.712-6.104-1.145-1.375-2.634-2.062-4.475-2.062-3.021-.056-5.026.505-6.021 1.686-.994 1.179-1.49 2.806-1.49 4.881l-.11 31.229c0 1.796.515 3.188 1.548 4.166 1.028.982 2.834 1.476 5.412 1.476 1.618.0 2.908-.295 3.866-.883.957-.593 1.692-1.334 2.21-2.231.515-.896.828-1.88.938-2.946.11-1.064.166-2.076.166-3.028v-5.726h19.442v7.744c0 2.693-.534 5.176-1.603 7.449-1.067 2.271-2.727 4.224-4.972 5.85-2.247 1.629-5.156 2.894-8.729 3.788-3.573.897-7.826 1.347-12.761 1.347-4.493.0-8.305-.447-11.435-1.347-3.132-.896-5.688-2.201-7.679-3.914-1.988-1.71-3.442-3.813-4.363-6.312-.922-2.497-1.382-5.349-1.382-8.545V551.16c0-6.899 2.117-11.979 6.354-15.233 4.232-3.254 10.808-4.883 19.72-4.883 4.124.0 7.823.353 11.104 1.054 3.275.702 6.058 1.782 8.341 3.239 2.282 1.461 4.033 3.354 5.248 5.684s1.821 5.092 1.821 8.29v5.304H185.44V554.611z"/><path fill="#fff" d="M231.8 574.649l-16.795-1.156 3.754-54.526 24.521 1.688c6.934.479 12.024 1.985 15.27 4.521 3.243 2.536 4.682 6.521 4.308 11.945-.2 2.909-.979 5.362-2.329 7.364-1.354 2.001-3.818 3.488-7.4 4.457l-.009.146c2.324.553 4.212 1.483 5.653 2.801 1.443 1.316 2.162 2.924 2.161 4.824.049 1.125.066 2.486.052 4.094-.013 1.604-.028 3.235-.047 4.892-.019 1.655-.018 3.236.007 4.749.023 1.514.135 2.712.329 3.603.389.854.887 1.521 1.49 2.002l-.051.729-18.317-1.261c-.219-.552-.392-1.086-.515-1.608-.125-.518-.199-1.046-.228-1.586.039-2.43.165-4.724.379-6.877.211-2.148.247-4.084.11-5.799-.139-1.712-.569-3.105-1.294-4.18-.726-1.074-2.071-1.726-4.036-1.958l-5.533-.381L231.8 574.649zM233.957 543.314l5.726.396c1.208.081 2.222-.041 3.045-.375.821-.334 1.479-.801 1.966-1.399s.842-1.305 1.058-2.118c.216-.812.354-1.631.409-2.455.108-1.6-.026-2.875-.409-3.827-.38-.949-1.034-1.679-1.958-2.18-.923-.501-2.132-.842-3.62-1.017-1.49-.177-3.255-.311-5.294-.401L233.957 543.314z"/><path d="M265.164 595.689l18.116-63.132h23.423l18.006 63.132h-19.663l-2.762-12.291h-15.246l-2.318 12.291H265.164zm29.828-51.684h-.222l-5.634 28.282h11.269L294.992 544.005z"/><path d="M352.709 556.745l-.223.168 1.77 35.188h-18.448v-63.132h19.995l15.024 35.269h.331l-1.88-35.269h18.45V592.1h-19.887l-15.132-35.355z"/><path d="M397.406 595.689v-63.132h44.521v12.625H416.85V556.8h24.305v12.627H416.85v13.636h26.403v12.627L397.406 595.689z"/><circle fill="#fff" cx="344.901" cy="536.967" r="3.136"/></svg></span><span class=font-weight-bold>Crane</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><i class='fas fa-book pr-2'></i><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><i class='fas fa-rss pr-2'></i><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><i class='fab fa-youtube pr-2'></i><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/gocrane/crane target=_blank><i class='fab fa-github pr-2'></i><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=http://dashboard.gocrane.io/ target=_blank><i class='fa-regular fa-flag'></i><span>Live Demo</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Crane Blog</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Releases</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://gocrane.io>main</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/docs/getting-started/installation/installation/>Chinese</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/docs/getting-started/installation/installation/>Chinese</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsgetting-started-li><input type=checkbox id=m-docsgetting-started-check checked>
<label for=m-docsgetting-started-check><a href=/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedintroduction-li><input type=checkbox id=m-docsgetting-startedintroduction-check>
<label for=m-docsgetting-startedintroduction-check><a href=/docs/getting-started/introduction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedintroduction><span>Introduction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsgetting-startedinstallation-li><input type=checkbox id=m-docsgetting-startedinstallation-check checked>
<label for=m-docsgetting-startedinstallation-check><a href=/docs/getting-started/installation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-startedinstallation><span>Installation</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedinstallationquick-start-li><input type=checkbox id=m-docsgetting-startedinstallationquick-start-check>
<label for=m-docsgetting-startedinstallationquick-start-check><a href=/docs/getting-started/installation/quick-start/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstallationquick-start><span>Quick Start</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedinstallationinstallation-li><input type=checkbox id=m-docsgetting-startedinstallationinstallation-check>
<label for=m-docsgetting-startedinstallationinstallation-check><a href=/docs/getting-started/installation/installation/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstallationinstallation><span class=td-sidebar-nav-active-item>Installation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedinstallationinstallation-cli-tool-li><input type=checkbox id=m-docsgetting-startedinstallationinstallation-cli-tool-check>
<label for=m-docsgetting-startedinstallationinstallation-cli-tool-check><a href=/docs/getting-started/installation/installation-cli-tool/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstallationinstallation-cli-tool><span>Installation of CLI Tool</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscore-concept-li><input type=checkbox id=m-docscore-concept-check>
<label for=m-docscore-concept-check><a href=/docs/core-concept/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscore-concept><span>Core Concept</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscore-conceptresource-optimize-model-li><input type=checkbox id=m-docscore-conceptresource-optimize-model-check>
<label for=m-docscore-conceptresource-optimize-model-check><a href=/docs/core-concept/resource-optimize-model/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscore-conceptresource-optimize-model><span>Application Resource Optimize Model</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscore-concepttimeseries-forecasting-by-dsp-li><input type=checkbox id=m-docscore-concepttimeseries-forecasting-by-dsp-check>
<label for=m-docscore-concepttimeseries-forecasting-by-dsp-check><a href=/docs/core-concept/timeseries-forecasting-by-dsp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscore-concepttimeseries-forecasting-by-dsp><span>Time Series Forecast Algorithm-DSP</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscore-conceptarchitecture-li><input type=checkbox id=m-docscore-conceptarchitecture-check>
<label for=m-docscore-conceptarchitecture-check><a href=/docs/core-concept/architecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscore-conceptarchitecture><span>Architecture</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li><input type=checkbox id=m-docstutorials-check>
<label for=m-docstutorials-check><a href=/docs/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Tutorials</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorialscolocation-with-enhanced-qos-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qos-check>
<label for=m-docstutorialscolocation-with-enhanced-qos-check><a href=/docs/tutorials/colocation-with-enhanced-qos/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorialscolocation-with-enhanced-qos><span>Colocation with Enhanced QOS</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosusing-qos-ensurance-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosusing-qos-ensurance-check>
<label for=m-docstutorialscolocation-with-enhanced-qosusing-qos-ensurance-check><a href=/docs/tutorials/colocation-with-enhanced-qos/using-qos-ensurance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosusing-qos-ensurance><span>Colocation with Enhanced QOS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosqos-interference-detection-and-active-avoidance-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosqos-interference-detection-and-active-avoidance-check>
<label for=m-docstutorialscolocation-with-enhanced-qosqos-interference-detection-and-active-avoidance-check><a href=/docs/tutorials/colocation-with-enhanced-qos/qos-interference-detection-and-active-avoidance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosqos-interference-detection-and-active-avoidance><span>Interference Detection and Active Avoidance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosqos-dynamic-resource-oversold-and-limit-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosqos-dynamic-resource-oversold-and-limit-check>
<label for=m-docstutorialscolocation-with-enhanced-qosqos-dynamic-resource-oversold-and-limit-check><a href=/docs/tutorials/colocation-with-enhanced-qos/qos-dynamic-resource-oversold-and-limit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosqos-dynamic-resource-oversold-and-limit><span>Dynamic resource oversold and limit</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosqos-accurately-perform-avoidance-actions-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosqos-accurately-perform-avoidance-actions-check>
<label for=m-docstutorialscolocation-with-enhanced-qosqos-accurately-perform-avoidance-actions-check><a href=/docs/tutorials/colocation-with-enhanced-qos/qos-accurately-perform-avoidance-actions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosqos-accurately-perform-avoidance-actions><span>Accurately Perform Avoidance Actions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosqos-customized-metrics-interference-detection-avoidance-and-sorting-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosqos-customized-metrics-interference-detection-avoidance-and-sorting-check>
<label for=m-docstutorialscolocation-with-enhanced-qosqos-customized-metrics-interference-detection-avoidance-and-sorting-check><a href=/docs/tutorials/colocation-with-enhanced-qos/qos-customized-metrics-interference-detection-avoidance-and-sorting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosqos-customized-metrics-interference-detection-avoidance-and-sorting><span>Define your watermark</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialscolocation-with-enhanced-qosqos-enhanced-bypass-cpuset-management-li><input type=checkbox id=m-docstutorialscolocation-with-enhanced-qosqos-enhanced-bypass-cpuset-management-check>
<label for=m-docstutorialscolocation-with-enhanced-qosqos-enhanced-bypass-cpuset-management-check><a href=/docs/tutorials/colocation-with-enhanced-qos/qos-enhanced-bypass-cpuset-management/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscolocation-with-enhanced-qosqos-enhanced-bypass-cpuset-management><span>Enhanced bypass cpuset management capability</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorialsrecommendation-li><input type=checkbox id=m-docstutorialsrecommendation-check>
<label for=m-docstutorialsrecommendation-check><a href=/docs/tutorials/recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsrecommendation><span>Recommendation</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationrecommendation-framework-li><input type=checkbox id=m-docstutorialsrecommendationrecommendation-framework-check>
<label for=m-docstutorialsrecommendationrecommendation-framework-check><a href=/docs/tutorials/recommendation/recommendation-framework/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationrecommendation-framework><span>Recommendation Framework</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationreplicas-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationreplicas-recommendation-check>
<label for=m-docstutorialsrecommendationreplicas-recommendation-check><a href=/docs/tutorials/recommendation/replicas-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationreplicas-recommendation><span>Replicas Recommendation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationresource-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationresource-recommendation-check>
<label for=m-docstutorialsrecommendationresource-recommendation-check><a href=/docs/tutorials/recommendation/resource-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationresource-recommendation><span>Resource Recommendation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationidlenode-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationidlenode-recommendation-check>
<label for=m-docstutorialsrecommendationidlenode-recommendation-check><a href=/docs/tutorials/recommendation/idlenode-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationidlenode-recommendation><span>IdleNode Recommendation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationhpa-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationhpa-recommendation-check>
<label for=m-docstutorialsrecommendationhpa-recommendation-check><a href=/docs/tutorials/recommendation/hpa-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationhpa-recommendation><span>HPA Recommendation（Alpha）</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationservice-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationservice-recommendation-check>
<label for=m-docstutorialsrecommendationservice-recommendation-check><a href=/docs/tutorials/recommendation/service-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationservice-recommendation><span>Service Recommendation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationpv-recommendation-li><input type=checkbox id=m-docstutorialsrecommendationpv-recommendation-check>
<label for=m-docstutorialsrecommendationpv-recommendation-check><a href=/docs/tutorials/recommendation/pv-recommendation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationpv-recommendation><span>PV Recommendation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsrecommendationhow-to-develop-recommender-li><input type=checkbox id=m-docstutorialsrecommendationhow-to-develop-recommender-check>
<label for=m-docstutorialsrecommendationhow-to-develop-recommender-check><a href=/docs/tutorials/recommendation/how-to-develop-recommender/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsrecommendationhow-to-develop-recommender><span>How to develop Recommender</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsdynamic-scheduler-plugin-li><input type=checkbox id=m-docstutorialsdynamic-scheduler-plugin-check>
<label for=m-docstutorialsdynamic-scheduler-plugin-check><a href=/docs/tutorials/dynamic-scheduler-plugin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsdynamic-scheduler-plugin><span>Dynamic-scheduler: a load-aware scheduler plugin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsscheduling-pods-based-on-actual-node-load-li><input type=checkbox id=m-docstutorialsscheduling-pods-based-on-actual-node-load-check>
<label for=m-docstutorialsscheduling-pods-based-on-actual-node-load-check><a href=/docs/tutorials/scheduling-pods-based-on-actual-node-load/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsscheduling-pods-based-on-actual-node-load><span>Crane-scheduler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsusing-effective-hpa-to-scaling-with-effectiveness-li><input type=checkbox id=m-docstutorialsusing-effective-hpa-to-scaling-with-effectiveness-check>
<label for=m-docstutorialsusing-effective-hpa-to-scaling-with-effectiveness-check><a href=/docs/tutorials/using-effective-hpa-to-scaling-with-effectiveness/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsusing-effective-hpa-to-scaling-with-effectiveness><span>Effective HorizontalPodAutoscaler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsusing-time-series-prediction-li><input type=checkbox id=m-docstutorialsusing-time-series-prediction-check>
<label for=m-docstutorialsusing-time-series-prediction-check><a href=/docs/tutorials/using-time-series-prediction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsusing-time-series-prediction><span>TimeSeriesPrediction</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsbest-practices-li><input type=checkbox id=m-docsbest-practices-check>
<label for=m-docsbest-practices-check><a href=/docs/best-practices/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsbest-practices><span>Best Practices</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbest-practiceseffective-hpa-with-prometheus-adapter-li><input type=checkbox id=m-docsbest-practiceseffective-hpa-with-prometheus-adapter-check>
<label for=m-docsbest-practiceseffective-hpa-with-prometheus-adapter-check><a href=/docs/best-practices/effective-hpa-with-prometheus-adapter/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbest-practiceseffective-hpa-with-prometheus-adapter><span>Intelligent Autoscaling Practices Based on Effective HPA for Custom Metrics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbest-practiceshow-to-optimize-your-application-resource-li><input type=checkbox id=m-docsbest-practiceshow-to-optimize-your-application-resource-check>
<label for=m-docsbest-practiceshow-to-optimize-your-application-resource-check><a href=/docs/best-practices/how-to-optimize-your-application-resource/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbest-practiceshow-to-optimize-your-application-resource><span>How to optimize your application in FinOps era</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbest-practiceshow-kujiale-adopt-ehpa-li><input type=checkbox id=m-docsbest-practiceshow-kujiale-adopt-ehpa-check>
<label for=m-docsbest-practiceshow-kujiale-adopt-ehpa-check><a href=/docs/best-practices/how-kujiale-adopt-ehpa/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbest-practiceshow-kujiale-adopt-ehpa><span>How Kujiale achieve autoscaling with Crane EHPA</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsproposals-li><input type=checkbox id=m-docsproposals-check>
<label for=m-docsproposals-check><a href=/docs/proposals/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsproposals><span>Proposals</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsproposals20220228-advanced-cpuset-manger-li><input type=checkbox id=m-docsproposals20220228-advanced-cpuset-manger-check>
<label for=m-docsproposals20220228-advanced-cpuset-manger-check><a href=/docs/proposals/20220228-advanced-cpuset-manger/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposals20220228-advanced-cpuset-manger><span>Advanced CPUSet Manager</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsproposals20220402-policy-based-abnomal-detection-li><input type=checkbox id=m-docsproposals20220402-policy-based-abnomal-detection-check>
<label for=m-docsproposals20220402-policy-based-abnomal-detection-check><a href=/docs/proposals/20220402-policy-based-abnomal-detection/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposals20220402-policy-based-abnomal-detection><span>Provide a policy-based abnormal detection mechanism in crane-agent</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsproposals20220706-recommendation-framework-li><input type=checkbox id=m-docsproposals20220706-recommendation-framework-check>
<label for=m-docsproposals20220706-recommendation-framework-check><a href=/docs/proposals/20220706-recommendation-framework/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposals20220706-recommendation-framework><span>Recommendation Framework</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsproposalspod-sorting-and-precise-execution-for-crane-agent-li><input type=checkbox id=m-docsproposalspod-sorting-and-precise-execution-for-crane-agent-check>
<label for=m-docsproposalspod-sorting-and-precise-execution-for-crane-agent-check><a href=/docs/proposals/pod-sorting-and-precise-execution-for-crane-agent/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalspod-sorting-and-precise-execution-for-crane-agent><span>Pod Sorting And Precise Execution For Crane Agent</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributing-li><input type=checkbox id=m-docscontributing-check>
<label for=m-docscontributing-check><a href=/docs/contributing/ title=Contributing class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing Guidelines</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingcontributing-li><input type=checkbox id=m-docscontributingcontributing-check>
<label for=m-docscontributingcontributing-check><a href=/docs/contributing/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingcontributing><span>Contributing to Crane</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingdeveloper-guide-li><input type=checkbox id=m-docscontributingdeveloper-guide-check>
<label for=m-docscontributingdeveloper-guide-check><a href=/docs/contributing/developer-guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingdeveloper-guide><span>Developer Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingcode-standards-li><input type=checkbox id=m-docscontributingcode-standards-check>
<label for=m-docscontributingcode-standards-check><a href=/docs/contributing/code-standards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingcode-standards><span>Code Standard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsroadmap-li><input type=checkbox id=m-docsroadmap-check>
<label for=m-docsroadmap-check><a href=/docs/roadmap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsroadmap><span>Roadmap</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsroadmaproadmap-2023-li><input type=checkbox id=m-docsroadmaproadmap-2023-check>
<label for=m-docsroadmaproadmap-2023-check><a href=/docs/roadmap/roadmap-2023/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsroadmaproadmap-2023><span>Roadmap for 2023</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsroadmaproadmap-2022-li><input type=checkbox id=m-docsroadmaproadmap-2022-check>
<label for=m-docsroadmaproadmap-2022-check><a href=/docs/roadmap/roadmap-2022/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsroadmaproadmap-2022><span>Roadmap for 2022</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmirror-resources-li><input type=checkbox id=m-docsmirror-resources-check>
<label for=m-docsmirror-resources-check><a href=/docs/mirror-resources/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsmirror-resources><span>Mirror Resources</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#steps>Steps</a><ul><li><a href=#helm-installation>Helm Installation</a></li><li><a href=#installing-prometheus-and-grafana-with-helm-chart>Installing prometheus and grafana with helm chart</a></li><li><a href=#deploying-crane-and-fadvisor>Deploying Crane and Fadvisor</a></li><li><a href=#using-existing-prometheusoptional>Using Existing Prometheus（Optional）</a></li><li><a href=#using-existing-grafanaoptional>Using Existing Grafana（Optional）</a></li><li><a href=#deploying-crane-scheduleroptional>Deploying Crane-scheduler(optional)</a></li><li><a href=#verify-installation>Verify Installation</a></li></ul></li><li><a href=#customize-installation>Customize Installation</a></li><li><a href=#access-dashboard>Access Dashboard</a><ul><li><a href=#port-forward>Port Forward</a></li><li><a href=#nodeport>NodePort</a></li><li><a href=#loadbalancer>LoadBalancer</a></li><li><a href=#ingress>Ingress</a></li></ul></li><li><a href=#get-your-kubernetes-cost-report>Get your Kubernetes Cost Report</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/getting-started/>Getting Started</a></li><li class=breadcrumb-item><a href=/docs/getting-started/installation/>Installation</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/getting-started/installation/installation/>Installation</a></li></ol></nav><div class=td-content><h1>Installation</h1><div class=lead>How to install Crane</div><header class=article-meta><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>&nbsp; 6 minute read &nbsp;</p></header><h2 id=prerequisites>Prerequisites</h2><ul><li>Kubernetes 1.18+</li><li>Helm 3.1.0</li></ul><div class="alert alert-warning" role=alert>If your Kubernetes version >= 1.26, please referring to <a href=https://github.com/gocrane/crane/pull/839>PR</a></div><h2 id=steps>Steps</h2><h3 id=helm-installation>Helm Installation</h3><p>Please refer to Helm&rsquo;s <a href=https://helm.sh/docs/intro/install/>documentation</a> for installation.</p><h3 id=installing-prometheus-and-grafana-with-helm-chart>Installing prometheus and grafana with helm chart</h3><div class="alert alert-warning" role=alert>If you already deployed prometheus, grafana in your environment, then skip this step.</div><div class="alert alert-warning" role=alert>If your network is hard to connect GitHub resources, you can try the mirror repo. Like GitHub Release, GitHub Raw Content raw.githubusercontent.com.
But mirror repo has a certain latency. Please see Mirror Resources to know details.</div><p>Crane use prometheus to be the default metric provider.</p><p>Using following command to install prometheus components: prometheus-server, node-exporter, kube-state-metrics.</p><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active tab-Main" id=tabs-3-0-tab data-toggle=tab href=#tabs-3-0 role=tab onclick='handleClick("Main")' aria-controls=tabs-3-0 aria-selected=true>Main</a></li><li class=nav-item><a class="nav-link tab-Mirror" id=tabs-3-1-tab data-toggle=tab href=#tabs-3-1 role=tab onclick='handleClick("Mirror")' aria-controls=tabs-3-1 aria-selected=false>Mirror</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-0 role=tabpanel aria-labelled-by=tabs-3-0-tab><pre tabindex=0><code class=language-en data-lang=en>helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm install prometheus -n crane-system --version 19.6.1 \
    --set pushgateway.enabled=false \
    --set alertmanager.enabled=false \
    --set server.persistentVolume.enabled=false \
    -f https://raw.githubusercontent.com/gocrane/helm-charts/main/integration/prometheus/override_values.yaml \
    --create-namespace  prometheus-community/prometheus</code></pre></div><div class="tab-pane fade" id=tabs-3-1 role=tabpanel aria-labelled-by=tabs-3-1-tab><pre tabindex=0><code class=language-en data-lang=en>helm repo add prometheus-community https://finops-helm.pkg.coding.net/gocrane/prometheus-community
helm install prometheus -n crane-system --version 19.6.1 \
    --set pushgateway.enabled=false \
    --set alertmanager.enabled=false \
    --set server.persistentVolume.enabled=false \
    -f https://gitee.com/finops/helm-charts/raw/main/integration/prometheus/override_values.yaml \
    --create-namespace  prometheus-community/prometheus</code></pre></div></div><p>Fadvisor use grafana to present cost estimates. Using following command to install a grafana.</p><ul class="nav nav-tabs" id=tabs-4 role=tablist><li class=nav-item><a class="nav-link active tab-Main" id=tabs-4-0-tab data-toggle=tab href=#tabs-4-0 role=tab onclick='handleClick("Main")' aria-controls=tabs-4-0 aria-selected=true>Main</a></li><li class=nav-item><a class="nav-link tab-Mirror" id=tabs-4-1-tab data-toggle=tab href=#tabs-4-1 role=tab onclick='handleClick("Mirror")' aria-controls=tabs-4-1 aria-selected=false>Mirror</a></li></ul><div class=tab-content id=tabs-4-content><div class="tab-pane fade show active" id=tabs-4-0 role=tabpanel aria-labelled-by=tabs-4-0-tab><pre tabindex=0><code class=language-en data-lang=en>helm install grafana \
    -f https://raw.githubusercontent.com/gocrane/helm-charts/main/integration/grafana/override_values.yaml \
    -n crane-system \
    --create-namespace https://github.com/grafana/helm-charts/releases/download/grafana-6.11.0/grafana-6.11.0.tgz</code></pre></div><div class="tab-pane fade" id=tabs-4-1 role=tabpanel aria-labelled-by=tabs-4-1-tab><pre tabindex=0><code class=language-en data-lang=en>helm install grafana \
    -f https://gitee.com/finops/helm-charts/raw/main/integration/grafana/override_values.yaml \
    -n crane-system \
    --create-namespace https://finops-generic.pkg.coding.net/gocrane/generic/grafana-6.11.0.tgz\?version\=latest</code></pre></div></div><h3 id=deploying-crane-and-fadvisor>Deploying Crane and Fadvisor</h3><ul class="nav nav-tabs" id=tabs-5 role=tablist><li class=nav-item><a class="nav-link active tab-Main" id=tabs-5-0-tab data-toggle=tab href=#tabs-5-0 role=tab onclick='handleClick("Main")' aria-controls=tabs-5-0 aria-selected=true>Main</a></li><li class=nav-item><a class="nav-link tab-Mirror" id=tabs-5-1-tab data-toggle=tab href=#tabs-5-1 role=tab onclick='handleClick("Mirror")' aria-controls=tabs-5-1 aria-selected=false>Mirror</a></li></ul><div class=tab-content id=tabs-5-content><div class="tab-pane fade show active" id=tabs-5-0 role=tabpanel aria-labelled-by=tabs-5-0-tab><pre tabindex=0><code class=language-en data-lang=en>helm repo add crane https://gocrane.github.io/helm-charts
helm install crane -n crane-system --create-namespace crane/crane
helm install fadvisor -n crane-system --create-namespace crane/fadvisor</code></pre></div><div class="tab-pane fade" id=tabs-5-1 role=tabpanel aria-labelled-by=tabs-5-1-tab><pre tabindex=0><code class=language-en data-lang=en>helm repo add crane https://finops-helm.pkg.coding.net/gocrane/gocrane
helm install crane -n crane-system --create-namespace crane/crane
helm install fadvisor -n crane-system --create-namespace crane/fadvisor</code></pre></div></div><p>Customize the installation by overriding the Helm/Chart default parameters, for example:</p><pre tabindex=0><code>helm install crane -n crane-system --set metricAdapter.enable=false --create-namespace crane/crane 
</code></pre><table><thead><tr><th>Parameters</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>craned.containerArgs.prometheus-address</code></td><td>Craned Prometheus Address</td><td><code>http://prometheus-server.crane-system.svc.cluster.local:8080</code></td></tr><tr><td><code>metricAdapter.enable</code></td><td>Whether to install MetricAdapter</td><td><code>true</code></td></tr><tr><td><code>metricAdapter.installApiService</code></td><td>Whether to install MetricAdapter ApiService</td><td><code>true</code></td></tr><tr><td><code>craneAgent.enable</code></td><td>Whether to install Crane-Agent</td><td><code>true</code></td></tr><tr><td><code>craneAgent.containerArgs.feature-gates</code></td><td>Crane-Agent feature-gates</td><td><code>NodeResource=false</code></td></tr><tr><td><code>cranedDashboard.enable</code></td><td>Whether to install Crane-Dashboard</td><td><code>true</code></td></tr></tbody></table><p>For complete Helm/Chart parameters please refer to <a href=https://github.com/gocrane/helm-charts/tree/main/charts/crane>here</a></p><h3 id=using-existing-prometheusoptional>Using Existing Prometheus（Optional）</h3><p>Normally in a production environment offen already have a specified Prometheus. You can modify the Crane Chart Release configuration by using the following command or modify the Craned Deployment container Args directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade crane -n crane-system --set craned.containerArgs.prometheus-address<span style=color:#f92672>=</span>http://<span style=color:#f92672>{</span>prometheus-ip<span style=color:#f92672>}</span>:<span style=color:#f92672>{</span>port<span style=color:#f92672>}</span> --create-namespace crane/crane
</span></span></code></pre></div><p>At the same time, the cost analytics of the Crane Dashboard need to deploy <a href=https://github.com/kubernetes/kube-state-metrics>kube-state-metrics</a> (Prometheus Chart Will install it by default), also you need to config additional extraScrapeConfigs in your Prometheus, You can refer to <a href=https://github.com/gocrane/helm-charts/blob/main/integration/prometheus/override_values.yaml#L56>here</a>.</p><p>Finally, fadvisor needs to configure recording rules to aggregate cost data, You can refer to <a href=https://github.com/gocrane/helm-charts/blob/main/integration/prometheus/override_values.yaml#L6>here</a> to configuration in your Prometheus.</p><h3 id=using-existing-grafanaoptional>Using Existing Grafana（Optional）</h3><p>The Crane Dashboard supports the Grafana report embedded with the Iframe to show the cost distribution. If you want to use an external Grafana to embed into the Crane Dashboard, you need to modify the nginx configuration in the configmap at first.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl edit configmap -n crane-system nginx-conf
</span></span></code></pre></div><p>Change <code>grafana.{{ .Release.Namespace }}.svc.cluster.local</code> to be existing Grafana server address，Change <code>http://$upstream_grafana:8082</code> to be the existing Grafana server port。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span> <span style=color:#ae81ff>location /grafana {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>set $upstream_grafana grafana.{{ .Release.Namespace }}.svc.cluster.local;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_connect_timeout       180;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_send_timeout          180;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_read_timeout          180;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_pass http://$upstream_grafana:8082;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_redirect off;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>rewrite /grafana/(.*) /$1 break;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_http_version 1.1;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_set_header  Host $http_host;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_set_header  Upgrade $http_upgrade;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_set_header  Connection $connection_upgrade;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_set_header  X-Real-IP  $remote_addr;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Next up you need to config your grafana based on <a href=https://github.com/gocrane/helm-charts/blob/main/integration/grafana/override_values.yaml>here</a>, The idea was that Grafana supported embedding panels, but required that the corresponding permission configuration be turned on.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl edit configmap -n monitor grafana
</span></span></code></pre></div><ul><li>Make sure Service configuration is the same as nginx</li><li>Config datasources to be your prometheus address</li><li>Config dashboardProviders</li><li>Config dashboards</li><li>Config grafana.ini</li></ul><p>Finally, you should make sure your craned pods and grafana pods are restarted to reload configurations.</p><h3 id=deploying-crane-scheduleroptional>Deploying Crane-scheduler(optional)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm install scheduler -n crane-system --create-namespace crane/scheduler
</span></span></code></pre></div><h3 id=verify-installation>Verify Installation</h3><p>Check deployments are all available by running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get deploy -n crane-system
</span></span></code></pre></div><p>The output is similar to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>NAME                                             READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>crane-agent-8h7df                                1/1     Running   <span style=color:#ae81ff>0</span>          119m
</span></span><span style=display:flex><span>crane-agent-8qf5n                                1/1     Running   <span style=color:#ae81ff>0</span>          119m
</span></span><span style=display:flex><span>crane-agent-h9h5d                                1/1     Running   <span style=color:#ae81ff>0</span>          119m
</span></span><span style=display:flex><span>craned-5c69c684d8-dxmhw                          2/2     Running   <span style=color:#ae81ff>0</span>          20m
</span></span><span style=display:flex><span>grafana-7fddd867b4-kdxv2                         1/1     Running   <span style=color:#ae81ff>0</span>          41m
</span></span><span style=display:flex><span>metric-adapter-94b6f75b-k8h7z                    1/1     Running   <span style=color:#ae81ff>0</span>          119m
</span></span><span style=display:flex><span>prometheus-kube-state-metrics-6dbc9cd6c9-dfmkw   1/1     Running   <span style=color:#ae81ff>0</span>          45m
</span></span><span style=display:flex><span>prometheus-node-exporter-bfv74                   1/1     Running   <span style=color:#ae81ff>0</span>          45m
</span></span><span style=display:flex><span>prometheus-node-exporter-s6zps                   1/1     Running   <span style=color:#ae81ff>0</span>          45m
</span></span><span style=display:flex><span>prometheus-node-exporter-x5rnm                   1/1     Running   <span style=color:#ae81ff>0</span>          45m
</span></span><span style=display:flex><span>prometheus-server-5966b646fd-g9vxl               2/2     Running   <span style=color:#ae81ff>0</span>          45m
</span></span></code></pre></div><p>you can see <a href=https://github.com/gocrane/helm-charts>this</a> to learn more.</p><h2 id=customize-installation>Customize Installation</h2><p>Deploy <code>Crane</code> by apply YAML declaration.</p><ul class="nav nav-tabs" id=tabs-6 role=tablist><li class=nav-item><a class="nav-link active tab-Main" id=tabs-6-0-tab data-toggle=tab href=#tabs-6-0 role=tab onclick='handleClick("Main")' aria-controls=tabs-6-0 aria-selected=true>Main</a></li><li class=nav-item><a class="nav-link tab-Mirror" id=tabs-6-1-tab data-toggle=tab href=#tabs-6-1 role=tab onclick='handleClick("Mirror")' aria-controls=tabs-6-1 aria-selected=false>Mirror</a></li></ul><div class=tab-content id=tabs-6-content><div class="tab-pane fade show active" id=tabs-6-0 role=tabpanel aria-labelled-by=tabs-6-0-tab><pre tabindex=0><code class=language-en data-lang=en>git clone https://github.com/gocrane/crane.git
CRANE_LATEST_VERSION=$(curl -s https://api.github.com/repos/gocrane/crane/releases/latest | grep -oP &#39;&#34;tag_name&#34;: &#34;\K(.*)(?=&#34;)&#39;)
git checkout $CRANE_LATEST_VERSION
kubectl apply -f deploy/manifests
kubectl apply -f deploy/craned
kubectl apply -f deploy/metric-adapter</code></pre></div><div class="tab-pane fade" id=tabs-6-1 role=tabpanel aria-labelled-by=tabs-6-1-tab><pre tabindex=0><code class=language-en data-lang=en>git clone https://e.coding.net/finops/gocrane/crane.git
CRANE_LATEST_VERSION=$(curl -s https://api.github.com/repos/gocrane/crane/releases/latest | grep -oP &#39;&#34;tag_name&#34;: &#34;\K(.*)(?=&#34;)&#39;)
git checkout $CRANE_LATEST_VERSION
kubectl apply -f deploy/manifests
kubectl apply -f deploy/craned
kubectl apply -f deploy/metric-adapter</code></pre></div></div><p>The following command will configure prometheus http address for crane if you want to customize it. Specify <code>CUSTOMIZE_PROMETHEUS</code> if you have existing prometheus server.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export CUSTOMIZE_PROMETHEUS<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $CUSTOMIZE_PROMETHEUS <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span> sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#34;s/PROMETHEUS_ADDRESS/</span><span style=color:#e6db74>${</span>CUSTOMIZE_PROMETHEUS<span style=color:#e6db74>}</span><span style=color:#e6db74>/&#34;</span> deploy/craned/deployment.yaml ; <span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h2 id=access-dashboard>Access Dashboard</h2><p>You can use the dashboard to view and manage crane manifests.</p><p><img src=/images/dashboard.png alt></p><h3 id=port-forward>Port Forward</h3><p>Easy access to the dashboard through <code>kubectl port-forward</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n crane-system port-forward service/craned 9090:9090 
</span></span></code></pre></div><h3 id=nodeport>NodePort</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Change service type</span>
</span></span><span style=display:flex><span>kubectl patch svc craned -n crane-system -p <span style=color:#e6db74>&#39;{&#34;spec&#34;: {&#34;type&#34;: &#34;NodePort&#34;}}&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Get Dashboard link base on your cluster configuration</span>
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>kubectl get svc -n crane-system craned -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.spec.ports[?(@.name == &#34;dashboard-service&#34;)].nodePort}&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>NODE_IP<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>kubectl get node -ojsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[].status.addresses[?(@.type == &#34;InternalIP&#34;)].address}&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Dashboard link: http://</span><span style=color:#e6db74>${</span>NODE_IP<span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span>PORT<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h3 id=loadbalancer>LoadBalancer</h3><h4 id=quick-start>Quick Start</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Change service type</span>
</span></span><span style=display:flex><span>kubectl patch svc craned -n crane-system -p <span style=color:#e6db74>&#39;{&#34;spec&#34;: {&#34;type&#34;: &#34;LoadBalancer&#34;}}&#39;</span>
</span></span></code></pre></div><h4 id=example>Example</h4><pre tabindex=0><code class=language-log data-lang=log>$ kubectl patch svc craned -n crane-system -p &#39;{&#34;spec&#34;: {&#34;type&#34;: &#34;LoadBalancer&#34;}}&#39;

service/craned patched

$ kubectl get svc -n crane-system craned
NAME     TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)                                                      AGE
craned   LoadBalancer   10.101.123.74   10.200.0.4    443:30908/TCP,8082:32426/TCP,9090:31331/TCP,8080:31072/TCP   57m

# Access dashboard via 10.200.0.4:9090
</code></pre><h3 id=ingress>Ingress</h3><h4 id=kubernetesingress-nginx>kubernetes/ingress-nginx</h4><p>If the cluster version is &lt; 1.19, you can create the ingress resources like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-crane-dashboard</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crane-system</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ingressClassName</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>dashboard.gocrane.io</span> <span style=color:#75715e># change to your domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>serviceName</span>: <span style=color:#ae81ff>craned</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>servicePort</span>: <span style=color:#ae81ff>9090</span>
</span></span></code></pre></div><p>If the cluster uses Kubernetes version >= 1.19.x, then its suggested to create the second ingress resources, using yaml examples shown below.</p><p>These examples are in conformity with the <code>networking.kubernetes.io/v1</code> api.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-crane-dashboard</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crane-system</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>dashboard.gocrane.io</span> <span style=color:#75715e># change to your domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Prefix</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>craned</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>number</span>: <span style=color:#ae81ff>9090</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ingressClassName</span>: <span style=color:#ae81ff>nginx</span>
</span></span></code></pre></div><p>Example:</p><pre tabindex=0><code class=language-log data-lang=log>$ kubectl get svc -n ingress-nginx 
NAME                                 TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE
ingress-nginx-controller             LoadBalancer   10.102.235.229   10.200.0.5    80:32568/TCP,443:30144/TCP   91m
ingress-nginx-controller-admission   ClusterIP      10.102.49.240    &lt;none&gt;        443/TCP                      91m

$ curl -H &#34;Host: dashboard.gocrane.io&#34; 10.200.0.5
&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
  &lt;head&gt;
    &lt;meta charset=&#34;UTF-8&#34; /&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34; /&gt;
    &lt;title&gt;Crane Dashboard&lt;/title&gt;
    ................................................................
</code></pre><h4 id=traefik>Traefik</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>traefik.containo.us/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>IngressRoute</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>dashboard-crane-ingress</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crane-system</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>entryPoints</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>web</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>routes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Rule</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>match</span>: <span style=color:#ae81ff>Host(`dashboard.gocrane.io`)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>craned</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>port</span>: <span style=color:#ae81ff>9090</span>
</span></span></code></pre></div><pre tabindex=0><code class=language-log data-lang=log>$ kubectl get svc -n traefik-v2                     
NAME      TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)                      AGE
traefik   LoadBalancer   10.107.109.44   10.200.0.6    80:30102/TCP,443:30139/TCP   16m

$ curl -H &#34;Host: dashboard.gocrane.io&#34; 10.200.0.6 
&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
  &lt;head&gt;
    &lt;meta charset=&#34;UTF-8&#34; /&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34; /&gt;
    &lt;title&gt;Crane Dashboard&lt;/title&gt;
    ................................................................
</code></pre><h2 id=get-your-kubernetes-cost-report>Get your Kubernetes Cost Report</h2><p>Get the Grafana URL to visit by running these commands in the same shell:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export POD_NAME<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>kubectl get pods --namespace crane-system -l <span style=color:#e6db74>&#34;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana&#34;</span> -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{.items[0].metadata.name}&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>kubectl --namespace crane-system port-forward $POD_NAME <span style=color:#ae81ff>3000</span>
</span></span></code></pre></div><p>visit <a href=http://127.0.0.1:3000/dashboards>Cost Report</a> here with account(admin:admin).</p></div></main></div></div></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.aa9f4c5dae6a98b2c46277f4c56f1673a2b000d1756ce4ffae93784cab25e6d5.js integrity="sha256-qp9MXa5qmLLEYnf0xW8Wc6KwANF1bOT/rpN4TKsl5tU=" crossorigin=anonymous></script></body></html>