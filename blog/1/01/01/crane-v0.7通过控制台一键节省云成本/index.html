<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.102.3"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Crane v0.7：通过控制台一键节省云成本 | Crane</title><meta name=description content="Crane（ Cloud Resource Analytics and Economics ） 是一个依托FinOps理论指导，基于云原生技术栈的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。
近期，Crane 发布了 0.7.0 版本。在新版本里我们提供了大量的 …"><meta property="og:title" content="Crane v0.7：通过控制台一键节省云成本"><meta property="og:description" content="Crane（ Cloud Resource Analytics and Economics ） 是一个依托FinOps理论指导，基于云原生技术栈的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。
近期，Crane 发布了 0.7.0 版本。在新版本里我们提供了大量的新功能和优化，包括智能推荐框架 Recommendation Framework 以及全新改版的 Crane 产品化控制台。
详细的 Release Note 请见：https://github.com/gocrane/crane/releases/tag/v0.7.0
资源推荐框架 Recommendation Framework Crane 的资源推荐，副本推荐功能在腾讯内部落地帮助自研业务每月节省了大量的成本，取得了很好的效果，详情请见：https://mp.weixin.qq.com/s/1SeMzcf_VRvRysZ9NLI-Sw 。同时，我们认为自动分析集群资源找到浪费并给出优化建议是帮助企业降本的重要方法，引入更多的分析类型至关重要。
因此在 0.7.0 版本中，Crane 设计了 Recommendation Framework，它提供了一个可扩展的推荐框架以支持多种云资源的分析，并内置了多种推荐器：资源推荐，副本推荐，闲置资源推荐。Recommendation Framework 通过 RecommendationRule 和 Recommendation CRD 描述了如何进行资源的分析推荐。
智能推荐的规则
apiVersion: analysis.crane.io/v1alpha1 kind: RecommendationRule metadata: name: workloads-rule labels: analysis.crane.io/recommendation-rule-preinstall: &#34;true&#34; spec: runInterval: 24h # 每24h运行一次 resourceSelectors: # 资源的信息 - kind: Deployment apiVersion: apps/v1 - kind: StatefulSet apiVersion: apps/v1 namespaceSelector: any: true # 扫描所有namespace recommenders: # 使用 Workload 的副本和资源推荐器 - name: Replicas - name: Resource 推荐的结果"><meta property="og:type" content="article"><meta property="og:url" content="/blog/1/01/01/crane-v0.7%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E9%94%AE%E8%8A%82%E7%9C%81%E4%BA%91%E6%88%90%E6%9C%AC/"><meta property="article:section" content="blog"><meta property="article:modified_time" content="2024-03-15T04:27:07-05:00"><meta property="og:site_name" content="Crane"><meta itemprop=name content="Crane v0.7：通过控制台一键节省云成本"><meta itemprop=description content="Crane（ Cloud Resource Analytics and Economics ） 是一个依托FinOps理论指导，基于云原生技术栈的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。
近期，Crane 发布了 0.7.0 版本。在新版本里我们提供了大量的新功能和优化，包括智能推荐框架 Recommendation Framework 以及全新改版的 Crane 产品化控制台。
详细的 Release Note 请见：https://github.com/gocrane/crane/releases/tag/v0.7.0
资源推荐框架 Recommendation Framework Crane 的资源推荐，副本推荐功能在腾讯内部落地帮助自研业务每月节省了大量的成本，取得了很好的效果，详情请见：https://mp.weixin.qq.com/s/1SeMzcf_VRvRysZ9NLI-Sw 。同时，我们认为自动分析集群资源找到浪费并给出优化建议是帮助企业降本的重要方法，引入更多的分析类型至关重要。
因此在 0.7.0 版本中，Crane 设计了 Recommendation Framework，它提供了一个可扩展的推荐框架以支持多种云资源的分析，并内置了多种推荐器：资源推荐，副本推荐，闲置资源推荐。Recommendation Framework 通过 RecommendationRule 和 Recommendation CRD 描述了如何进行资源的分析推荐。
智能推荐的规则
apiVersion: analysis.crane.io/v1alpha1 kind: RecommendationRule metadata: name: workloads-rule labels: analysis.crane.io/recommendation-rule-preinstall: &#34;true&#34; spec: runInterval: 24h # 每24h运行一次 resourceSelectors: # 资源的信息 - kind: Deployment apiVersion: apps/v1 - kind: StatefulSet apiVersion: apps/v1 namespaceSelector: any: true # 扫描所有namespace recommenders: # 使用 Workload 的副本和资源推荐器 - name: Replicas - name: Resource 推荐的结果"><meta itemprop=dateModified content="2024-03-15T04:27:07-05:00"><meta itemprop=wordCount content="308"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Crane v0.7：通过控制台一键节省云成本"><meta name=twitter:description content="Crane（ Cloud Resource Analytics and Economics ） 是一个依托FinOps理论指导，基于云原生技术栈的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。
近期，Crane 发布了 0.7.0 版本。在新版本里我们提供了大量的新功能和优化，包括智能推荐框架 Recommendation Framework 以及全新改版的 Crane 产品化控制台。
详细的 Release Note 请见：https://github.com/gocrane/crane/releases/tag/v0.7.0
资源推荐框架 Recommendation Framework Crane 的资源推荐，副本推荐功能在腾讯内部落地帮助自研业务每月节省了大量的成本，取得了很好的效果，详情请见：https://mp.weixin.qq.com/s/1SeMzcf_VRvRysZ9NLI-Sw 。同时，我们认为自动分析集群资源找到浪费并给出优化建议是帮助企业降本的重要方法，引入更多的分析类型至关重要。
因此在 0.7.0 版本中，Crane 设计了 Recommendation Framework，它提供了一个可扩展的推荐框架以支持多种云资源的分析，并内置了多种推荐器：资源推荐，副本推荐，闲置资源推荐。Recommendation Framework 通过 RecommendationRule 和 Recommendation CRD 描述了如何进行资源的分析推荐。
智能推荐的规则
apiVersion: analysis.crane.io/v1alpha1 kind: RecommendationRule metadata: name: workloads-rule labels: analysis.crane.io/recommendation-rule-preinstall: &#34;true&#34; spec: runInterval: 24h # 每24h运行一次 resourceSelectors: # 资源的信息 - kind: Deployment apiVersion: apps/v1 - kind: StatefulSet apiVersion: apps/v1 namespaceSelector: any: true # 扫描所有namespace recommenders: # 使用 Workload 的副本和资源推荐器 - name: Replicas - name: Resource 推荐的结果"><link rel=preload href=/scss/main.min.730362c672539a20af5e07f8cb554bed1d08f06cf874786f2cba9f08a6a884cb.css as=style><link href=/scss/main.min.730362c672539a20af5e07f8cb554bed1d08f06cf874786f2cba9f08a6a884cb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="306" height="186" viewBox="144.139 425.446 306 186" enable-background="new 144.139 425.446 306 186"><path fill="#58bda6" d="M267.919 572.702c-.372 5.728-4.972 10.091-10.27 9.743l-40.779-2.65c-5.3-.347-9.293-5.269-8.923-10.991l2.974-45.702c.373-5.728 4.973-10.088 10.271-9.743l40.78 2.652c5.299.345 9.293 5.267 8.921 10.99L267.919 572.702z"/><path fill="#ee7300" d="M355.802 528.969c-28.058-24.713-63.021-62.657-91.196-87.232-1.938-1.69-5.604-3.409-7.457-2.647-1.938.795-3.404 4.46-3.778 7.058-1.761 12.192-2.91 28.237-4.656 40.433-.437 3.041-1.971 6.067-3.571 8.762-2.041 3.435-.873 12.792 2.958 15.723 3.085 2.357 4.303 5.096 1.854 7.834-1.351 1.512-4.525 1.391-6.992 2.032 2.374 2.482 5.765 2.633 9.24-.084 3.808-2.979 2.631-7.084-4.054-14.46 4.628-3.659 5.886-7.839 2.424-13.33-1.104-1.75-.191-4.886.068-7.356 1.027-9.761 2.094-23.278 3.315-33.019.292-2.324 1.237-4.564 2.349-8.479 26.078 34.224 56.794 78.868 82.623 112.767.93-6.764-.387-17.9-.708-23.131-.193-3.154-5.785-8.536-7.861-11.352-3.039-4.109-6.746-7.742-9.644-11.94-.76-1.101-.824-2.206.128-3.594 1.252-1.816 2.925.178 3.865 1.018 9.287 8.277 25.465 24.596 31.02 35.665.248.495-1.506-11.808-.865-10.746"/><path d="M185.44 554.611v-4.04c0-2.692-.57-4.727-1.712-6.104-1.145-1.375-2.634-2.062-4.475-2.062-3.021-.056-5.026.505-6.021 1.686-.994 1.179-1.49 2.806-1.49 4.881l-.11 31.229c0 1.796.515 3.188 1.548 4.166 1.028.982 2.834 1.476 5.412 1.476 1.618.0 2.908-.295 3.866-.883.957-.593 1.692-1.334 2.21-2.231.515-.896.828-1.88.938-2.946.11-1.064.166-2.076.166-3.028v-5.726h19.442v7.744c0 2.693-.534 5.176-1.603 7.449-1.067 2.271-2.727 4.224-4.972 5.85-2.247 1.629-5.156 2.894-8.729 3.788-3.573.897-7.826 1.347-12.761 1.347-4.493.0-8.305-.447-11.435-1.347-3.132-.896-5.688-2.201-7.679-3.914-1.988-1.71-3.442-3.813-4.363-6.312-.922-2.497-1.382-5.349-1.382-8.545V551.16c0-6.899 2.117-11.979 6.354-15.233 4.232-3.254 10.808-4.883 19.72-4.883 4.124.0 7.823.353 11.104 1.054 3.275.702 6.058 1.782 8.341 3.239 2.282 1.461 4.033 3.354 5.248 5.684s1.821 5.092 1.821 8.29v5.304H185.44V554.611z"/><path fill="#fff" d="M231.8 574.649l-16.795-1.156 3.754-54.526 24.521 1.688c6.934.479 12.024 1.985 15.27 4.521 3.243 2.536 4.682 6.521 4.308 11.945-.2 2.909-.979 5.362-2.329 7.364-1.354 2.001-3.818 3.488-7.4 4.457l-.009.146c2.324.553 4.212 1.483 5.653 2.801 1.443 1.316 2.162 2.924 2.161 4.824.049 1.125.066 2.486.052 4.094-.013 1.604-.028 3.235-.047 4.892-.019 1.655-.018 3.236.007 4.749.023 1.514.135 2.712.329 3.603.389.854.887 1.521 1.49 2.002l-.051.729-18.317-1.261c-.219-.552-.392-1.086-.515-1.608-.125-.518-.199-1.046-.228-1.586.039-2.43.165-4.724.379-6.877.211-2.148.247-4.084.11-5.799-.139-1.712-.569-3.105-1.294-4.18-.726-1.074-2.071-1.726-4.036-1.958l-5.533-.381L231.8 574.649zM233.957 543.314l5.726.396c1.208.081 2.222-.041 3.045-.375.821-.334 1.479-.801 1.966-1.399s.842-1.305 1.058-2.118c.216-.812.354-1.631.409-2.455.108-1.6-.026-2.875-.409-3.827-.38-.949-1.034-1.679-1.958-2.18-.923-.501-2.132-.842-3.62-1.017-1.49-.177-3.255-.311-5.294-.401L233.957 543.314z"/><path d="M265.164 595.689l18.116-63.132h23.423l18.006 63.132h-19.663l-2.762-12.291h-15.246l-2.318 12.291H265.164zm29.828-51.684h-.222l-5.634 28.282h11.269L294.992 544.005z"/><path d="M352.709 556.745l-.223.168 1.77 35.188h-18.448v-63.132h19.995l15.024 35.269h.331l-1.88-35.269h18.45V592.1h-19.887l-15.132-35.355z"/><path d="M397.406 595.689v-63.132h44.521v12.625H416.85V556.8h24.305v12.627H416.85v13.636h26.403v12.627L397.406 595.689z"/><circle fill="#fff" cx="344.901" cy="536.967" r="3.136"/></svg></span><span class=font-weight-bold>Crane</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><i class='fas fa-book pr-2'></i><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><i class='fas fa-rss pr-2'></i><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><i class='fab fa-youtube pr-2'></i><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/gocrane/crane target=_blank><i class='fab fa-github pr-2'></i><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=http://dashboard.gocrane.io/ target=_blank><i class='fa-regular fa-flag'></i><span>Live Demo</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/blog/><span class=active>Crane Blog</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Releases</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://gocrane.io>main</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/blog/1/01/01/crane-v0.7%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E9%94%AE%E8%8A%82%E7%9C%81%E4%BA%91%E6%88%90%E6%9C%AC/>Chinese</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/blog/1/01/01/crane-v0.7%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E9%94%AE%E8%8A%82%E7%9C%81%E4%BA%91%E6%88%90%E6%9C%AC/>Chinese</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>Crane Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog10101crane-v07e9809ae8bf87e68ea7e588b6e58fb0e4b880e994aee88a82e79c81e4ba91e68890e69cac-li><input type=checkbox id=m-blog10101crane-v07e9809ae8bf87e68ea7e588b6e58fb0e4b880e994aee88a82e79c81e4ba91e68890e69cac-check>
<label for=m-blog10101crane-v07e9809ae8bf87e68ea7e588b6e58fb0e4b880e994aee88a82e79c81e4ba91e68890e69cac-check><a href=/blog/1/01/01/crane-v0.7%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E9%94%AE%E8%8A%82%E7%9C%81%E4%BA%91%E6%88%90%E6%9C%AC/ title="Crane v0.7：通过控制台一键节省云成本" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-blog10101crane-v07e9809ae8bf87e68ea7e588b6e58fb0e4b880e994aee88a82e79c81e4ba91e68890e69cac><span class=td-sidebar-nav-active-item>Release v0.7</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#资源推荐框架-recommendation-framework>资源推荐框架 Recommendation Framework</a></li><li><a href=#crane-dashboard>Crane Dashboard</a><ul><li><a href=#成本分析>成本分析</a></li><li><a href=#碳排放计算器>碳排放计算器</a></li></ul></li><li><a href=#升级指南>升级指南</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class="btn btn-lg -bg-orange td-rss-button d-none d-lg-block" href=/blog/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=td-content><h1>Crane v0.7：通过控制台一键节省云成本</h1><div class="td-byline mb-4"><time datetime=0001-01-01 class=text-muted>Monday, January 01, 0001</time></div><header class=article-meta><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>&nbsp; 2 minute read &nbsp;</p></header><p>Crane（ Cloud Resource Analytics and Economics ） 是一个依托FinOps理论指导，基于云原生技术栈的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。</p><p>近期，Crane 发布了 0.7.0 版本。在新版本里我们提供了大量的新功能和优化，包括智能推荐框架 Recommendation Framework 以及全新改版的 Crane 产品化控制台。</p><p>详细的 Release Note 请见：https://github.com/gocrane/crane/releases/tag/v0.7.0</p><h2 id=资源推荐框架-recommendation-framework>资源推荐框架 Recommendation Framework</h2><p>Crane 的资源推荐，副本推荐功能在腾讯内部落地帮助自研业务每月节省了大量的成本，取得了很好的效果，详情请见：<a href=https://mp.weixin.qq.com/s/1SeMzcf_VRvRysZ9NLI-Sw>https://mp.weixin.qq.com/s/1SeMzcf_VRvRysZ9NLI-Sw</a> 。同时，我们认为自动分析集群资源找到浪费并给出优化建议是帮助企业降本的重要方法，引入更多的分析类型至关重要。</p><p>因此在 0.7.0 版本中，Crane 设计了 Recommendation Framework，它提供了一个可扩展的推荐框架以支持多种云资源的分析，并内置了多种推荐器：资源推荐，副本推荐，闲置资源推荐。Recommendation Framework 通过 <code>RecommendationRule</code> 和 <code>Recommendation</code> CRD 描述了如何进行资源的分析推荐。</p><p>智能推荐的规则</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>analysis.crane.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>RecommendationRule</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>workloads-rule</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>analysis.crane.io/recommendation-rule-preinstall</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>runInterval</span>: <span style=color:#ae81ff>24h                           </span> <span style=color:#75715e># 每24h运行一次</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resourceSelectors</span>:                          <span style=color:#75715e># 资源的信息</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>StatefulSet</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespaceSelector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>any</span>: <span style=color:#66d9ef>true</span>                                 <span style=color:#75715e># 扫描所有namespace</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>recommenders</span>:                               <span style=color:#75715e># 使用 Workload 的副本和资源推荐器</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Replicas</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Resource</span>
</span></span></code></pre></div><p>推荐的结果</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Recommendation</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>analysis.crane.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>workloads-rule-resource-flzbv</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crane-system</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>analysis.crane.io/recommendation-rule-name</span>: <span style=color:#ae81ff>workloads-rule</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>analysis.crane.io/recommendation-rule-recommender</span>: <span style=color:#ae81ff>Resource</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>analysis.crane.io/recommendation-rule-uid</span>: <span style=color:#ae81ff>18588495</span>-<span style=color:#ae81ff>f325-4873-b45a-7acfe9f1ba94</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>craned</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/instance</span>: <span style=color:#ae81ff>crane</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/managed-by</span>: <span style=color:#ae81ff>Helm</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/name</span>: <span style=color:#ae81ff>crane</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/version</span>: <span style=color:#ae81ff>v0.7.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>helm.sh/chart</span>: <span style=color:#ae81ff>crane-0.7.0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ownerReferences</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>analysis.crane.io/v1alpha1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>RecommendationRule</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>workloads-rule</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uid</span>: <span style=color:#ae81ff>18588495</span>-<span style=color:#ae81ff>f325-4873-b45a-7acfe9f1ba94</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>controller</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>blockOwnerDeletion</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetRef</span>:                 <span style=color:#75715e># 推荐目标资源</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>crane-system</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>craned</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Resource</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>completionStrategy</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>completionStrategyType</span>: <span style=color:#ae81ff>Once</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>adoptionType</span>: <span style=color:#ae81ff>StatusAndAnnotation </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>status</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>recommendedInfo</span>: &gt;-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    </span>    {<span style=color:#e6db74>&#34;spec&#34;</span>:{<span style=color:#e6db74>&#34;template&#34;</span>:{<span style=color:#e6db74>&#34;spec&#34;</span>:{<span style=color:#e6db74>&#34;containers&#34;</span>:[{<span style=color:#e6db74>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;craned&#34;</span>,<span style=color:#e6db74>&#34;resources&#34;</span>:{<span style=color:#e6db74>&#34;requests&#34;</span>:{<span style=color:#e6db74>&#34;cpu&#34;</span>:<span style=color:#e6db74>&#34;229m&#34;</span>,<span style=color:#e6db74>&#34;memory&#34;</span>:<span style=color:#e6db74>&#34;120586239&#34;</span>}}},{<span style=color:#e6db74>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;dashboard&#34;</span>,<span style=color:#e6db74>&#34;resources&#34;</span>:{<span style=color:#e6db74>&#34;requests&#34;</span>:{<span style=color:#e6db74>&#34;cpu&#34;</span>:<span style=color:#e6db74>&#34;114m&#34;</span>,<span style=color:#e6db74>&#34;memory&#34;</span>:<span style=color:#e6db74>&#34;120586239&#34;</span>}}}]}}}}            <span style=color:#75715e># 推荐配置，可通过 kubectl patch 更新 deployment 配置</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>currentInfo</span>: &gt;-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;craned&#34;,&#34;resources&#34;:{&#34;requests&#34;:{&#34;cpu&#34;:&#34;0&#34;,&#34;memory&#34;:&#34;0&#34;}}},{&#34;name&#34;:&#34;dashboard&#34;,&#34;resources&#34;:{&#34;requests&#34;:{&#34;cpu&#34;:&#34;0&#34;,&#34;memory&#34;:&#34;0&#34;}}}]}}}}                       # 当前配置，可通过 kubectl patch 回滚已经采纳建议的 deployment 配置
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    action: Patch                                     # 建议的 Action</span>    
</span></span></code></pre></div><p>目前 Crane 支持了以下推荐能力：</p><ul><li><strong>资源推荐</strong>: 通过 VPA 算法分析应用的真实用量推荐更合适的资源配置</li><li><strong>副本数推荐</strong>: 通过 HPA 算法分析应用的真实用量推荐更合适的副本数量</li><li><strong>闲置节点推荐</strong>: 扫描集群中的空闲节点</li><li><strong>闲置PV推荐</strong>: 扫描集群中的未挂载 Pod 的 PV</li></ul><p>用户可以基于 Recommendation Framework 通过实现 Recommender 接口<strong>快速开发新的推荐能力或者扩展现有的推荐能力</strong>。欢迎大家一起共建，丰富各类云资源的推荐能力，比如：GPU 的资源推荐，腾讯云 CLB 的闲置资源推荐。</p><h2 id=crane-dashboard>Crane Dashboard</h2><p>Crane 在0.7.0 版本中花了大量时间基于 TDesign 的前端模版重构了 Dashboard，提供了一套美观、实用的产品界面。</p><p>新手用户可以观看以下视频对 Dashboard 有一个初步的了解：</p><iframe src=https://user-images.githubusercontent.com/35299017/186680122-d7756b47-06be-44cb-8553-1957eaa3ed45.mp4 scrolling=no border=0 frameborder=no framespacing=0 allowfullscreen width=1000 height=600></iframe><p>视频中将一次成本优化过程分成了三个步骤：</p><ol><li><strong>成本展示</strong>: Kubernetes 资源( Deployments, StatefulSets )的多维度聚合与展示。</li><li><strong>成本分析</strong>: 周期性的分析集群资源的状态并提供优化建议。</li><li><strong>成本优化</strong>: 通过丰富的优化工具更新配置达成降本的目标。</li></ol><p>通过 Dashboard，用户可以了解如何通过 Dashboard 快速上手，开启成本优化之旅。</p><p>我们也提供了 Crane Dashboard 的 <strong>Live Demo</strong>，欢迎体验：http://dashboard.gocrane.io/</p><h3 id=成本分析>成本分析</h3><p>用户可以在 Dashboard 的 菜单->成本分析->资源推荐 中使用各种推荐能力，通过推荐功能，用户可以发现集群中的资源浪费，页面上的“采纳建议” 会提供一条 kubectl 命令，用户可以在他的环境中执行命令更新资源配置实现降本，后续会提供一键采纳建议的功能。</p><p>资源推荐：
<img src=https://qcloudimg.tencent-cloud.cn/raw/cb640bcaf1ceaab768c321e0763d62bf.png alt=image></p><p>副本数推荐：
<img src=https://qcloudimg.tencent-cloud.cn/raw/613e5b342a96e044710026a3d991ab48.png alt=image></p><h3 id=碳排放计算器>碳排放计算器</h3><p>用户可以在 Dashboard 的 菜单->成本洞察->碳排放分析 中使用碳排放计算器：
<img src=https://qcloudimg.tencent-cloud.cn/raw/3413d877baae18586f76537b1f0e3d09.png alt=image></p><p>详细的能力介绍请参考：<a href=https://mp.weixin.qq.com/s/HQFTT7VG8M_q3WV7e4LRkg>https://mp.weixin.qq.com/s/HQFTT7VG8M_q3WV7e4LRkg</a></p><h2 id=升级指南>升级指南</h2><p>通过以下命令可以从旧版本的 Crane 升级到 0.7.0。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>kubectl apply -f https://raw.githubusercontent.com/gocrane/helm-charts/crane-0.7.0/charts/crane/crds/analysis.crane.io_analytics.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>kubectl apply -f https://raw.githubusercontent.com/gocrane/helm-charts/crane-0.7.0/charts/crane/crds/analysis.crane.io_recommendationrules.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>kubectl apply -f https://raw.githubusercontent.com/gocrane/helm-charts/crane-0.7.0/charts/crane/crds/analysis.crane.io_recommendations.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>kubectl apply -f https://raw.githubusercontent.com/gocrane/helm-charts/crane-0.7.0/charts/crane/crds/autoscaling.crane.io_effectivehorizontalpodautoscalers.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>kubectl apply -f https://raw.githubusercontent.com/gocrane/helm-charts/crane-0.7.0/charts/crane/crds/autoscaling.crane.io_effectiveverticalpodautoscalers.yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>helm repo add crane https://gocrane.github.io/helm-charts</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>helm repo update</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>helm upgrade -n crane-system --install crane crane/crane --version 0.7.0</span>
</span></span></code></pre></div><pre tabindex=0><code>This is the final element on the page and there should be no margin below this.
</code></pre><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a class="btn btn-primary disabled"><span class=mr-1>←</span>Previous</a></li><a class="btn btn-primary disabled">Next<span class=ml-1>→</span></a></li></ul></div></main></div></div></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.aa9f4c5dae6a98b2c46277f4c56f1673a2b000d1756ce4ffae93784cab25e6d5.js integrity="sha256-qp9MXa5qmLLEYnf0xW8Wc6KwANF1bOT/rpN4TKsl5tU=" crossorigin=anonymous></script></body></html>