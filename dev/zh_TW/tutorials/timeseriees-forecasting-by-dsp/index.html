
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../images/crane.svg">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>DSP预测算法 - Crane - Cloud Resource Analytics and Economics</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Work Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/util.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dsp" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="Crane - Cloud Resource Analytics and Economics" class="md-header__button md-logo" aria-label="Crane - Cloud Resource Analytics and Economics" data-md-component="logo">
      
  <img src="../../../images/crane.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Crane - Cloud Resource Analytics and Economics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DSP预测算法
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../../../tutorials/timeseriees-forecasting-by-dsp/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../../zh/tutorials/timeseriees-forecasting-by-dsp/" hreflang="zh" class="md-select__link">
                    简体中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="./" hreflang="zh_TW" class="md-select__link">
                    繁體中文
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gocrane/crane" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gocrane/crane
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Crane - Cloud Resource Analytics and Economics" class="md-nav__button md-logo" aria-label="Crane - Cloud Resource Analytics and Economics" data-md-component="logo">
      
  <img src="../../../images/crane.svg" alt="logo">

    </a>
    Crane - Cloud Resource Analytics and Economics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gocrane/crane" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gocrane/crane
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          入門
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="入門" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          入門
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        介紹
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        安裝
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          教程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="教程" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../using-effective-hpa-to-scaling-with-effectiveness/" class="md-nav__link">
        高效水平彈性
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          智慧推薦
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="智慧推薦" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          智慧推薦
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../analytics-and-recommendation/" class="md-nav__link">
        推薦
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resource-recommendation/" class="md-nav__link">
        資源推薦
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../replicas-recommendation/" class="md-nav__link">
        副本數推薦
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../using-qos-ensurance/" class="md-nav__link">
        Qos Ensurance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../using-time-series-prediction/" class="md-nav__link">
        Time Series Prediction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Crane-scheduler
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Crane-scheduler" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Crane-scheduler
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scheduling-pods-based-on-actual-node-load/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-scheduler-plugin/" class="md-nav__link">
        負載感知調度
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Best Practices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Best Practices" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Best Practices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../effective-hpa-with-prometheus-adapter/" class="md-nav__link">
        Custom Metric Prediction With Prometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          提案
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="提案" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          提案
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../proposals/20220228-advanced-cpuset-manger/" class="md-nav__link">
        Advanced CpuSet Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../proposals/Pod-Sorting-And-Precise-Execution-For-Crane-Agent/" class="md-nav__link">
        Pod Sorting And Precise Execution For Crane Agent
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        貢獻
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../code-standards/" class="md-nav__link">
        代碼標準
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          技術路線
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="技術路線" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          技術路線
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmaps/roadmap-2022/" class="md-nav__link">
        2022
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../mirror/" class="md-nav__link">
        鏡像資源
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    流程
  </a>
  
    <nav class="md-nav" aria-label="流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    预处理
  </a>
  
    <nav class="md-nav" aria-label="预处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    填充缺失数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    去除异常点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    离散傅里叶变换
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    循环自相关函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    预测
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    应用
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/gocrane/crane/edit/master/docs/tutorials/timeseriees-forecasting-by-dsp.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="dsp">DSP预测算法<a class="headerlink" href="#dsp" title="Permanent link">&para;</a></h1>
<p>Crane使用在数字信号处理（Digital Signal Processing）领域中常用的的<code>离散傅里叶变换</code>、<code>自相关函数</code>等手段，识别、预测周期性的时间序列。</p>
<p>本文将介绍DSP算法的实现流程和参数设置，以便帮助大家了解算法背后的原理，并将它应用到实际场景中。 （相关代码位于<code>pkg/prediction/dsp</code>目录下）</p>
<h2 id="_1">流程<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p><img alt="" src="../../images/algorithm/dsp/dsp.png" /></p>
<h3 id="_2">预处理<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<h4 id="_3">填充缺失数据<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>监控数据在某些时间点上缺失是很常见的现象，Crane会根据前后的数据对缺失的采样点进行填充。做法如下：</p>
<p>假设第<span class="arithmatex">\(m\)</span>个与第<span class="arithmatex">\(n\)</span>个采样点之间采样数据缺失（<span class="arithmatex">\(m+1 &lt; n\)</span>）,设在<span class="arithmatex">\(m\)</span>和<span class="arithmatex">\(n\)</span>点的采样值分别为<span class="arithmatex">\(v_m\)</span>和<span class="arithmatex">\(v_n\)</span>，令<span class="arithmatex">\(<span class="arithmatex">\(\Delta = {v_n-v_m \over n-m}\)</span>\)</span>，则<span class="arithmatex">\(m\)</span>和<span class="arithmatex">\(n\)</span>之间的填充数据依次为<span class="arithmatex">\(v_m+\Delta , v_m+2\Delta , ...\)</span></p>
<p><img alt="" src="../../images/algorithm/dsp/missing_data_fill.png" /></p>
<h4 id="_4">去除异常点<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>监控数据中偶尔会出现一些极端的异常数据点，导致这些异常点（outliers）的原因有很多，例如：
1. 监控系统用0值填充缺失的采样点；
2. 被监控组件由于自身的bug上报了错误的指标数据；
3. 应用启动时会消耗远超正常运行时的资源</p>
<p>这些极端的异常点对于信号的周期判断会造成干扰，需要进行去除。做法如下：</p>
<p>选取实际序列中所有采样点的<span class="arithmatex">\(P99.9\)</span>和<span class="arithmatex">\(P0.1\)</span>，分别作为上、下限阈值，如果某个采样值低于下限或者高于上限，将采样点的值设置为前一个采样值。</p>
<p><img alt="" src="../../images/algorithm/dsp/remove_outliers.png" /></p>
<h4 id="_5">离散傅里叶变换<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>对监控的时间序列（设长度为<span class="arithmatex">\(N\)</span>）做快速离散傅里叶变换（FFT），得到信号的频谱图（spectrogram），频谱图直观地表现为在各个离散点<span class="arithmatex">\(k\)</span>处的「冲击」。
冲击的高度为<span class="arithmatex">\(k\)</span>对应周期分量的「幅度」，<span class="arithmatex">\(k\)</span>的取值范围<span class="arithmatex">\(\(0,1,2, ... N-1\)\)</span>。</p>
<p><span class="arithmatex">\(k = 0\)</span>对应信号的「直流分量」，对于周期没有影响，因此忽略。</p>
<p>由于离散傅里叶变换后的频谱序列前一半和后一半是共轭对称的，反映到频谱图上就是关于轴对称，因此只看前一半<span class="arithmatex">\(N/2\)</span>即可。</p>
<p><span class="arithmatex">\(k\)</span>所对应的周期<span class="arithmatex">\(<span class="arithmatex">\(T = {N \over k} \bullet SampleInterval\)</span>\)</span></p>
<p>要观察一个信号是不是以<span class="arithmatex">\(T\)</span>为周期，至少需要观察两倍的<span class="arithmatex">\(T\)</span>的长度，因此通过长度为<span class="arithmatex">\(N\)</span>的序列能够识别出的最长周期为<span class="arithmatex">\(N/2\)</span>。所以可以忽略<span class="arithmatex">\(k = 1\)</span>。</p>
<p>至此，<span class="arithmatex">\(k\)</span>的取值范围为<span class="arithmatex">\((2, 3, ... , N/2)\)</span>，对应的周期为<span class="arithmatex">\(N/2, N/3, ...\)</span>，这也就是FFT能够提供的周期信息的「分辨率」。如果一个信号的周期没有落到<span class="arithmatex">\(N/k\)</span>上，它会散布到整个频域，导致「频率泄漏」。
好在在实际生产环境中，我们通常遇到的应用（尤其是在线业务），如果有规律，都是以「天」为周期的，某些业务可能会有所谓的「周末」效应，即周末和工作日不太一样，如果扩大到「周」的粒度去观察，它们同样具有良好的周期性。</p>
<p>Crane没有尝试发现任意长度的周期，而是指定几个固定的周期长度（<span class="arithmatex">\(1d、7d\)</span>）去判断。并通过截取、填充的方式，保证序列的长度<span class="arithmatex">\(N\)</span>为待检测周期<span class="arithmatex">\(T\)</span>的整倍数，例如：<span class="arithmatex">\(T=1d，N=3d；T=7d，N=14d\)</span>。</p>
<p>我们从生产环境中抓取了一些应用的监控指标，保存为csv格式，放到<code>pkg/prediction/dsp/test_data</code>目录下。
例如，<code>input0.csv</code>文件包括了一个应用连续8天的CPU监控数据，对应的时间序列如下图：</p>
<p><img alt="" src="../../images/algorithm/dsp/input0.png" /></p>
<p>我们看到，尽管每天的数据不尽相同，但大体「模式」还是基本一致的。</p>
<p>对它做FFT，会得到下面的频谱图：</p>
<p><img alt="" src="../../images/algorithm/dsp/spectrum.png" /></p>
<p>我们发现在几个点上的「幅值」明显高于其它点，这些点便可以作为我们的「候选周期」，待进一步的验证。</p>
<p>上面是我们通过直觉判断的，Crane是如何挑选「候选周期」的呢？</p>
<ol>
<li>
<p>对原始序列<span class="arithmatex">\(\vec x(n)\)</span>进行一个随机排列后得到序列<span class="arithmatex">\(\vec x'(n)\)</span>，再对<span class="arithmatex">\(\vec x'(n)\)</span>做FFT得到<span class="arithmatex">\(\vec X'(k)\)</span>，令<span class="arithmatex">\(P_{max} = argmax\|\vec X'(k)\|\)</span>。</p>
</li>
<li>
<p>重复100次上述操作，得到100个<span class="arithmatex">\(P_{max}\)</span>，取<span class="arithmatex">\(P99\)</span>作为阈值<span class="arithmatex">\(P_{threshold}\)</span>。</p>
</li>
<li>
<p>对原始序列<span class="arithmatex">\(\vec x(n)\)</span>做FFT得到<span class="arithmatex">\(\vec X(f)\)</span>，遍历<span class="arithmatex">\(k = 2, 3, ...\)</span>，如果<span class="arithmatex">\(P_k = \|X(k)\| &gt; P_{threshold}\)</span>，则将<span class="arithmatex">\(k\)</span>加入候选周期。</p>
</li>
</ol>
<h4 id="_6">循环自相关函数<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>自相关函数（Auto Correlation Function，ACF）是一个信号于其自身在不同时间点的互相关。通俗的讲，它就是两次观察之间的相似度对它们之间的时间差的函数。</p>
<p>Crane使用循环自相关函数（Circular ACF），先对长度为<span class="arithmatex">\(N\)</span>的时间序列以<span class="arithmatex">\(N\)</span>为周期做扩展，也就是在<span class="arithmatex">\(..., [-N, -1], [N, 2N-1], ...\)</span>区间上复制<span class="arithmatex">\(\vec x(n)\)</span>，得到一个新的序列<span class="arithmatex">\(\vec x'(n)\)</span>。
再依次计算将<span class="arithmatex">\(\vec x'(n)\)</span>依次平移<span class="arithmatex">\(k=1,2,3,...N/2\)</span>后的<span class="arithmatex">\(\vec x'(n+k)\)</span>与<span class="arithmatex">\(\vec x'(n)\)</span>的相关系数</p>
<div class="arithmatex">\[r_k={\displaystyle\sum_{i=-k}^{N-k-1} (x_i-\mu)(x_{i+k}-\mu) \over \displaystyle\sum_{i=0}^{N-1} (x_i-\mu)^2}\ \ \ \mu: mean\]</div>
<p>Crane没有直接使用上面的定义去计算ACF，而是根据下面的公式，通过两次<span class="arithmatex">\((I)FFT\)</span>，从而能够在<span class="arithmatex">\(O(nlogn)\)</span>的时间内完成ACF的计算。
<span class="arithmatex">\(<span class="arithmatex">\(\vec r = IFFT(|FFT({\vec x - \mu \over \sigma})|^2)\ \ \ \mu: mean,\ \sigma: standard\ deviation\)</span>\)</span></p>
<p>ACF的图像如下所示，横轴代表信号平移的时间长度<span class="arithmatex">\(k\)</span>；纵轴代表自相关系数<span class="arithmatex">\(r_k\)</span>，反应了平移信号与原始信号的「相似」程度。</p>
<p><img alt="" src="../../images/algorithm/dsp/acf.png" /></p>
<p>Crane会依次验证每一个候选周期对应的自相关系数是否位于「山顶」上；并且选择对应「最高峰」的那个候选周期为整个时间序列的主周期（基波周期），并以此为基础进行预测。</p>
<p>如何判断「山顶」？</p>
<p>Crane在两侧个各选取一段曲线，分别做线性回归，当回归后左、右的直线斜率分别大于、小于零时，则认为这个点是在一个「山顶」上。</p>
<p><img alt="" src="../../images/algorithm/dsp/linear_regression.png" /></p>
<h4 id="_7">预测<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>根据上一步得到的主周期，Crane提供了两种方式去拟合（预测）下一个周期的时序数据
<strong>maxValue</strong></p>
<p>选取过去几个周期中相同时刻<span class="arithmatex">\(t\)</span>（例如：下午6:00）中的最大值，作为下一个周期<span class="arithmatex">\(t\)</span>时刻的预测值。</p>
<p><img alt="" src="../../images/algorithm/dsp/max_value.png" />
<strong>fft</strong></p>
<p>对原始时间序列做FFT得到频谱序列，去除「高频噪声」后，再做IFFT（逆快速傅里叶变换），将得到的时间序列作为下一个周期的预测结果。</p>
<h2 id="_8">应用<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>Crane提供了<code>TimeSeriesPrediction</code>，通过这个CRD，用户可以对各种时间序列进行预测，例如工作负责的CPU利用率、应用的QPS等等。
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prediction.crane.io/v1alpha1</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TimeSeriesPrediction</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tsp-workload-dsp</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><a href="#__codelineno-0-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><a href="#__codelineno-0-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">  </span><span class="nt">targetRef</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><a href="#__codelineno-0-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><a href="#__codelineno-0-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><a href="#__codelineno-0-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><a href="#__codelineno-0-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><a href="#__codelineno-0-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">  </span><span class="nt">predictionWindowSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7200</span><span class="w"> </span><span class="c1"># 提供未来7200秒（2小时）的预测数据。Crane会把预测数据写到status中。</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><a href="#__codelineno-0-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">  </span><span class="nt">predictionMetrics</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><a href="#__codelineno-0-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resourceIdentifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workload-cpu</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><a href="#__codelineno-0-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExpressionQuery</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><a href="#__codelineno-0-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">      </span><span class="nt">expressionQuery</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><a href="#__codelineno-0-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="nt">expression</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sum</span><span class="nv"> </span><span class="s">(irate</span><span class="nv"> </span><span class="s">(container_cpu_usage_seconds_total{container!=&quot;&quot;,image!=&quot;&quot;,container!=&quot;POD&quot;,pod=~&quot;^test-.*$&quot;}[1m]))&#39;</span><span class="w"> </span><span class="c1"># 获取历史监控数据的查询语句</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><a href="#__codelineno-0-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span><span class="nt">algorithm</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><a href="#__codelineno-0-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="nt">algorithmType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dsp&quot;</span><span class="w"> </span><span class="c1"># 指定dsp为预测算法</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><a href="#__codelineno-0-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="nt">dsp</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><a href="#__codelineno-0-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">          </span><span class="nt">sampleInterval</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span><span class="w"> </span><span class="c1"># 监控数据的采样间隔为1分钟</span><span class="w"></span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><a href="#__codelineno-0-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">          </span><span class="nt">historyLength</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;15d&quot;</span><span class="w">  </span><span class="c1"># 拉取过去15天的监控指标作为预测的依据</span><span class="w"></span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><a href="#__codelineno-0-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">          </span><span class="nt">estimators</span><span class="p">:</span><span class="w">           </span><span class="c1"># 指定预测方式，包括&#39;maxValue&#39;和&#39;fft&#39;，每一类可以指定多个estimator，配置不同的参数，crane会选取一个拟合度最高的去产生预测结果。如果不指定的话，默认使用&#39;fft&#39;。</span><span class="w"></span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><a href="#__codelineno-0-24"><span class="linenos" data-linenos="24 "></span></a><span class="c1">#            maxValue:</span><span class="w"></span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a><span class="c1">#              - marginFraction: &quot;0.1&quot;</span><span class="w"></span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="nt">fft</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><a href="#__codelineno-0-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">marginFraction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.2&quot;</span><span class="w"></span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><a href="#__codelineno-0-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">                </span><span class="nt">lowAmplitudeThreshold</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span><span class="w"></span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><a href="#__codelineno-0-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">                </span><span class="nt">highFrequencyThreshold</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.05&quot;</span><span class="w"></span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><a href="#__codelineno-0-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">                </span><span class="nt">minNumOfSpectrumItems</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><a href="#__codelineno-0-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">                </span><span class="nt">maxNumOfSpectrumItems</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w"></span>
</code></pre></div>
上面示例中的一些dsp参数含义如下：</p>
<p><strong>maxValue</strong></p>
<p><code>marginFraction</code>: 拟合出下一个周期的序列后，将每一个预测值乘以<code>1 + marginFraction</code>，例如<code>marginFraction = 0.1</code>,就是乘以1.1。<code>marginFraction</code>的作用是将预测数据进行一定比例的放大（或缩小）。</p>
<p><strong>fft</strong></p>
<p><code>marginFraction</code>: 拟合出下一个周期的序列后，将每一个预测值乘以<code>1 + marginFraction</code>，例如<code>marginFraction = 0.1</code>,就是乘以1.1。<code>marginFraction</code>的作用是将预测数据进行一定比例的放大（或缩小）。</p>
<p><code>lowAmplitudeThreshold</code>: 频谱幅度下限，所有幅度低于这个下限的频率分量将被滤除。</p>
<p><code>highFrequencyThreshold</code>: 频率上限，所有频率高于这个上限的频率分量将被滤除。单位Hz，例如如果想忽略长度小于1小时的周期分量，设置<code>highFrequencyThreshold = 1/3600</code>。</p>
<p><code>minNumOfSpectrumItems</code>: 至少保留频率分量的个数。</p>
<p><code>maxNumOfSpectrumItems</code>：至多保留频率分量的个数。</p>
<p>简单来说，保留频率分量的数量越少、频率上限越低、频谱幅度下限越高，预测出来的曲线越光滑，但会丢失一些细节；反之，曲线毛刺越多，保留更多细节。</p>
<p>下面是对同一时段预测的两条曲线，蓝色、绿色的<code>highFrequencyThreshold</code>分别为<span class="arithmatex">\(0.01\)</span>和<span class="arithmatex">\(0.001\)</span>，蓝色曲线过滤掉了更多的高频分量，因此更为平滑。</p>
<p><img alt="" src="../../images/algorithm/dsp/lft_0_001.png" /> <img alt="" src="../../images/algorithm/dsp/lft_0_01.png" /></p>
<p>并没有一套参数配置适合所有的时间序列，通常需要根据应用指标的特点，去调整算法参数，以期获得最佳的预测效果。
Crane提供了一个web接口，使用者可以在调整参数后，直观的看到预测效果，使用步骤如下：</p>
<ol>
<li>修改<code>TimeSeriesPrediction</code>中的<code>estimators</code>的参数。</li>
<li>访问craned http server的<code>api/prediction/debug/&lt;namespace&gt;/&lt;timeseries prediction name&gt;</code>，查看参数效果（如下图）。</li>
</ol>
<p><img alt="" src="../../images/algorithm/dsp/dsp_debug.png" /></p>
<p>上述步骤可多次执行，直到得到满意的预测效果。</p>
<p><strong>通过port-forward进行本地调试</strong></p>
<p>craned http server的端口通过craned启动参数<code>--server-bind-port</code>设置，默认为<code>8082</code>。</p>
<p>打开终端，
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a>$kubectl -n crane-system port-forward service/craned 8082:8082
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><a href="#__codelineno-1-2"><span class="linenos" data-linenos="2 "></span></a>Forwarding from 127.0.0.1:8082 -&gt; 8082
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><a href="#__codelineno-1-3"><span class="linenos" data-linenos="3 "></span></a>Forwarding from [::1]:8082 -&gt; 8082
</code></pre></div>
打开浏览器，访问<code>http://localhost:8082/api/prediction/debug/&lt;namespace&gt;/&lt;timeseries prediction name&gt;</code></p>




              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.top"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="../../../assets/util.js"></script>
      
        <script src="../../../assets/mathjax.js"></script>
      
        <script src="../../../assets/polyfill.min.js"></script>
      
        <script src="../../../assets/tex-mml-chtml.js"></script>
      
    
  </body>
</html>